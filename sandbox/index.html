<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Include SDK JS</title>
  <script type="text/javascript" src="blipWebSdk.js"></script>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <div class="jumbotron">
          <h1>BlipWebSDK (BLiP Chat) Sandbox</h1>
          <p>Use buttons bellow to see different behaviours of BLiP Chat</p>

          <button onclick="buildSDK(BlipWebSDK.AuthType.GUEST)">Build SDK as GUEST (Default)</button>
          <button onclick="buildSDK(BlipWebSDK.AuthType.LOGIN)">Build SDK as LOGIN</button>
          <button onclick="buildSDK(BlipWebSDK.AuthType.DEV)">Build SDK as DEV</button>
          <button onclick="changeSDK()">Change SDK Template</button>
          <button onclick="sendMessage()">Send test message</button>
          <button onclick="destroySDK()">Destroy SDK</button>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12">
        <div class="jumbotron">
          <h1>For authentication type DEV</h1>
          <p>Enter the name and email of the client (We will create a random identifier and password for them)</p>

          <form>
            Full Name: <input type="text" id="fullName">
            <br> Email: <input type="text" id="email">
            <br> Id: <input type="text" id="userId" value="391f4be0-ae0a-43fa-919a-a729df697a42" disabled="disabled">
            <br> Password: <input type="text" id="userPass" value="2569cf92-bdcf-4684-9cd9-1d1641bf10e5" disabled="disabled">
            <br>
          </form>
        </div>
      </div>
    </div>

  </div>
  <div id="sdk-target" style="height:550px; width: 50%"> </div>

  <script>
                           var sendMessage;
                           var destroySDK;
                           var buildSDK;
                           var currentTemplate;
                           var blipsdk;
                           (function () {
                             window.onload = function () {

                               var apiKey = 'YOUR-API-KEY';

                               //  var options = {
                               //    title: 'BLiP Chat Title Sample',
                               //    authType: BlipWebSDK.AuthType.DEV,
                               //    user: {
                               //      id: '123qwe',
                               //      password: '12345'
                               //    },
                               //    target: 'sdk-target',
                               //    zIndex: 123,
                               //  }

                               var options = {
                                 config: {
                                   authType: BlipWebSDK.AuthType.GUEST
                                 },
                                 window: {
                                   target: 'sdk-target',
                                   title: 'BLiP Chat Title Sample',
                                   widgetColor: '#e00303'
                                 }
                               }

                               sendMessage = function () {
                                 blipsdk.sendMessage('teste');
                               }

                               destroySDK = function () {
                                 blipsdk.destroy();
                               }

                               buildSDK = function (authType) {
                                 if (blipsdk) {
                                   blipsdk.destroy();
                                 }

                                 options.window.target = currentTemplate;
                                 options.config.authType = authType;
                                 options.config.user = {
                                   id: document.getElementById('userId').value, // Required
                                   password: document.getElementById('userPass').value, // Required
                                   name: document.getElementById('fullName').value ? document.getElementById('fullName').value : '', // Optional
                                   email: document.getElementById('email').value ? document.getElementById('email').value : ''// Optional
                                 };

                                 blipsdk = new BlipWebSDK.ChatBuilder()
                                   .withApiKey(apiKey)
                                 blipsdk.build(options);
                               }

                               changeSDK = function () {

                                 if (currentTemplate !== undefined) {
                                   currentTemplate = undefined;
                                 } else {
                                   currentTemplate = 'sdk-target';
                                 }

                                 buildSDK(BlipWebSDK.AuthType.GUEST);
                               }

                               buildSDK(BlipWebSDK.AuthType.GUEST);


                             }
                           })();
  </script>
</body>

</html>